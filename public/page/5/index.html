<!DOCTYPE html>
<html class="no-js" lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="CodeVerse">
    <meta name="author" content="Marco Pas">

    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>CodeVerse</title>

 	
	<link rel="stylesheet" href="http://localhost:1313//css/journal.css">

 	
 	<link rel="stylesheet" href="http://localhost:1313//css/style.css">

    <link rel="stylesheet" href="http://localhost:1313//css/font-awesome.min.css">
    
    
    <script src="http://localhost:1313//js/jquery.min-2.1.4.js"></script>
    <script src="http://localhost:1313//js/bootstrap.min-3.3.4.js"></script>

    
    <link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="CodeVerse" />
</head>
<body lang="en">
    
    <div class="container">
    <div class="row">
        <div class="navbar navbar-default navbar-inverse" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://localhost:1313/">CodeVerse</a> 
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://localhost:1313/">Home</a></li>
                    <li><a href="http://localhost:1313//page/about/">About</a></li>
                    <li><a href="http://localhost:1313//page/resume/">Resume</a></li>
                    <li><a href="http://localhost:1313//post/">Blog</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>


    <div class="container">
        
        
            	
		<div class="row">
			
			<div class="col-md-offset-1 col-md-10">
				<h3><a href="http://localhost:1313/post/2014/2013/02/grails-migrations-and-waiting-for-changelog/">Grails migrations and &#39;Waiting for changelog lock&#39;</a></h3>
					<span class="label label-primary">Thu Feb 28, 2013</span> in 
					
						
						<a href="/categories/development">Development</a>
					 using tags 			 
					
						
						<a href="/tags/grails">grails</a>
					
						 , 
						<a href="/tags/migrations">migrations</a>
					
				</small>
			</div>
		</div>	
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<br> 
				<p>Sometimes it may happen that the automatic migrations in a Grails project may come to a hold due to the fact that Liquibase keeps waiting for a changelog lock. At the end this will result in a application that is not going to be deployed.</p>

<pre><code>...
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
...
</code></pre>

<p>To solve this take the following steps:</p>

<ul>
<li>Stop the application container (example: Tomcat)</li>
<li>In the database look for a table called <code>DATABASECHANGELOGLOCK</code></li>

<li><p>In the table there is a record with id=1, change the following values:</p>

<pre><code>locked -&gt; 0
lockgranted -&gt; null
lockedby -&gt; null
</code></pre></li>

<li><p>After updating this record start the application container</p></li>
</ul>

<p><strong>Notes:</strong><br />
To see who has locked the database (normally the local machine):</p>

<pre><code>select * from DATABASECHANGELOGLOCK;
To update the record
update DATABASECHANGELOGLOCK 
set locked=0, lockgranted=null, lockedby=null 
where id=1
</code></pre>

			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<hr>
			</div>
		</div>
	
        
            	
		<div class="row">
			
			<div class="col-md-offset-1 col-md-10">
				<h3><a href="http://localhost:1313/post/2014/2013/01/testing-constraints-with-build-test-data/">Testing constraints with Build Test Data</a></h3>
					<span class="label label-primary">Sun Jan 13, 2013</span> in 
					
						
						<a href="/categories/development">Development</a>
					 using tags 			 
					
						
						<a href="/tags/build">build</a>
					
						 , 
						<a href="/tags/testdata">testdata</a>
					
						 , 
						<a href="/tags/grails">grails</a>
					
						 , 
						<a href="/tags/spock">spock</a>
					
						 , 
						<a href="/tags/test">test</a>
					
				</small>
			</div>
		</div>	
		<div class="row">
			<div class="col-md-offset-1 col-md-10">
				<br> 
				<p>The <a href="http://grails.org/plugin/spock">Spock</a> &amp; <a href="http://grails.org/plugin/build-test-data">Build Test Data</a> plugins both are wonderful additions to your toolkit if you are creating tests without getting into the hassle of constantly building up your object graph. You can focus on what you want to test!</p>

<p>When testing constraints on an object it can be used as follows:</p>

<pre><code>class Foo {
    String name   // name of foo
    Integer age   // age of foo

    static constraints = {
     name nullable: false, blank: false // name may never be nullable or blank
     age nullable: true
    }
}
</code></pre>

<p>And the Spock test</p>

<pre><code>@Build(Foo)
@TestFor(Foo)
class FooSpec extends Specification {

    def &quot;Name of Foo must exist&quot;() {
        given: &quot;setting up the constraints&quot;
        mockForConstraintsTests(Foo)

        when: &quot;creating a Foo&quot;
        Foo foo = Foo.buildWithoutSave()

        then: &quot;validation should trigger&quot;
        assertFalse foo.validate()

        and: &quot;validation error should be on the value field&quot;
        assert foo.errors.allErrors.first().field == &quot;name&quot;
    }

}
</code></pre>

			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<hr>
			</div>
		</div>
	
        
	</div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="text-center">
                    
    
    <ul class="pagination">
        
        <li>
            <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        >
        <a href="/page/4/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        ><a href="/">1</a></li>
        
        <li
        ><a href="/page/2/">2</a></li>
        
        <li
        ><a href="/page/3/">3</a></li>
        
        <li
        ><a href="/page/4/">4</a></li>
        
        <li
        class="active"><a href="/page/5/">5</a></li>
        
        <li
        ><a href="/page/6/">6</a></li>
        
        <li
        ><a href="/page/7/">7</a></li>
        
        <li
        ><a href="/page/8/">8</a></li>
        
        <li
        ><a href="/page/9/">9</a></li>
        
        <li
        ><a href="/page/10/">10</a></li>
        
        <li
        ><a href="/page/11/">11</a></li>
        
        <li
        >
        <a href="/page/6/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="/page/11/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <hr>
            </div>
        </div>
    </div>
  <div class="container">
    <div class="row col-md-12">
          <footer>
            <div class="pull-left">
                <p>
                    &copy; 2014 Marco Pas ~ Powered By <a href="http://hugo.spf13.com">Hugo</a>
                </p>
            </div>

            <div class="pull-right">
                
                    <a href="https://www.facebook.com/marco.pasopas" target="_blank">
                    <i class="fa fa-facebook-square fa-2x"></i></a>
                
                
                    <a href="https://twitter.com/marcopas" target="_blank">
                    <i class="fa fa-twitter-square fa-2x"></i></a>
                
                
                    <a href="https://github.com/mpas" target="_blank">
                    <i class="fa fa-github-square fa-2x"></i></a>
                
                
                    <a href="https://delicious.com/marcopas" target="_blank">
                    <i class="fa fa-delicious fa-2x"></i></a>
                                

                    <a href="http://localhost:1313/index.xml" target="_blank">
                    <i class="fa fa-rss-square fa-2x"></i></a>

            </div>
            </footer>
        </div>
    </div>

    
    <script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
